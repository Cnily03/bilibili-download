window.unsafeWindow=window;class PluginCookie{constructor(e,t=2592e3){this.MAX_AGE=t,this.PLUGIN_NAME=e.replace(/ /g,"-"),this.COOKIE_NAME="Tampermonkey."+this.PLUGIN_NAME}jsonVal(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var o=e[t].split("=");if(this.COOKIE_NAME==o[0].trim())return JSON.parse(o[1])}return{}}get(e){var t=this.jsonVal();return Object.keys(t).length||this.delCookie(),t[e]}set(e,t){let o=this.jsonVal();return o[e]=t,document.cookie=this.COOKIE_NAME+"="+JSON.stringify(o)+"; max-age="+this.MAX_AGE.toString(),"{}"==JSON.stringify(o)&&this.delCookie(),t}remove(e){let t=this.jsonVal();return delete t[e],document.cookie=this.COOKIE_NAME+"="+JSON.stringify(t)+"; max-age="+this.MAX_AGE.toString(),Object.keys(t).length||this.delCookie(),!0}delCookie(){document.cookie=this.COOKIE_NAME+"=; max-age=0"}}var valSave={add:e=>{valSave[e]=new PluginCookie(e)},remove:e=>{delete valSave[e]}};valSave.add("Bilibili-Evolved"),window.GM_getValue=e=>window.valSave["Bilibili-Evolved"].get(e),window.GM_setValue=(e,t)=>window.valSave["Bilibili-Evolved"].set(e,t),window.GM_setClipboard=(t,o)=>{"text"==o&&(o="text/plain");var e=e=>{e.clipboardData.setData(o,t),e.preventDefault()};document.addEventListener("copy",e);try{document.execCommand("copy")}catch(e){alert("\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u590d\u5236\uff0c\u8bf7\u5b89\u88c5 Tampermonkey \u63d2\u4ef6\u4f7f\u7528 Bilibili Evolved.")}document.removeEventListener("copy",e)},window.GM_xmlhttpRequest=e=>{const t=new XMLHttpRequest;t.open(e.method,e.url,!0),t.responseType=e.responseType||"text",t.setRequestHeader("Content-Type",e.contentType||"application/x-www-form-urlencoded"),t.onload=()=>e.onload(t),t.onerror=()=>e.onerror(t),t.send(e.data||null)};